var searchFunc=function(e,p,t,a,i){$.ajax({url:e,dataType:"json",success:function(e){var n,r,s=e,e=document.getElementById(a);e&&(n=document.getElementById(i),r=document.getElementById(t),e.addEventListener("input",function(){var o=[],h=function(e){for(var t,n=[],r=0;r<e.length;r++)for(t=r+1;t<e.length+1;t++)n.push(e.slice(r,t).join(" "));return n}(this.value.trim().toLowerCase().split(" ")).sort(function(e,t){return t.split(" ").length-e.split(" ").length});if(n.innerHTML="",this.value.trim().length<=0)r.setAttribute("searching","false");else if(r.setAttribute("searching","true"),s.forEach(function(e){var t,n,r,s,a,i,c,l,u;e.content?.trim().length&&(t=0,p&&!e.path.includes(p)||(l=e.title?.trim()||"Untitled",n=l.toLowerCase(),u=e.content,r=u.toLowerCase(),e=e.path,i=a=s=-1,""!==u&&h.forEach(function(e){s=n.indexOf(e),a=r.indexOf(e),(0<=s||0<=a)&&(t+=1,a<0&&(a=0),i<0)&&(i=a)}),0<t&&((c={}).rank=t,c.str="<li><a href='"+e+"'><span class='search-result-title'>"+l+"</span>",0<=i&&(e=i+80,(e=0==(l=(l=i-20)<0?0:l)?100:e)>u.length&&(e=u.length),u=u.substring(l,e),l=new RegExp(h.join("|"),"gi"),u=u.replace(l,function(e){return'<span class="search-keyword">'+e+"</span>"}),c.str+='<p class="search-result-content">'+u+"...</p>"),c.str+="</a></li>",o.push(c))))}),o.length){o.sort(function(e,t){return t.rank-e.rank});for(var e='<ul class="search-result-list">',t=0;t<o.length;t++)e+=o[t].str;n.innerHTML=e+="</ul>"}}))}})};utils.jq(()=>{var e,n=$("input#search-input");0!=n.length&&(e=document.querySelector("div#search-result"),n.focus(function(){var e=ctx.search.path,t=(e.startsWith("/")&&(e=e.substring(1)),e=ctx.root+e,n.attr("data-filter")||"");searchFunc(e,t,"search-wrapper","search-input","search-result")}),n.keydown(function(e){13==e.which&&e.preventDefault()}),new MutationObserver(function(e,t){1==e.length&&(e[0].addedNodes.length?$(".search-wrapper").removeClass("noresult"):e[0].removedNodes.length&&$(".search-wrapper").addClass("noresult"))}).observe(e,{childList:!0}))});