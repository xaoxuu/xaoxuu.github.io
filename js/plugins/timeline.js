const StellarTimeline={reactions:{"+1":"👍","-1":"👎",laugh:"😀",hooray:"🎉",confused:"😕",heart:"❤️",rocket:"🚀",eyes:"👀"},requestAPI:(r,o,i)=>{let s=5;!function a(){return new Promise((n,e)=>{let t=0,l=setTimeout(()=>{0===t&&(t=2,l=null,e("请求超时"),0==s&&i())},5e3);fetch(r).then(function(e){if(2!==t&&(clearTimeout(l),n(e),l=null,t=1),e.ok)return e.json();throw new Error("Network response was not ok.")}).then(function(e){s=0,o(e)}).catch(function(e){0<s?(--s,setTimeout(()=>{a()},5e3)):i()})})}()},layoutDiv:e=>{const o=$(e.el)[0];$(o).append('<div class="loading-wrap"><svg class="loading" style="vertical-align: middle;fill: currentColor;overflow: hidden;" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2709"><path d="M832 512c0-176-144-320-320-320V128c211.2 0 384 172.8 384 384h-64zM192 512c0 176 144 320 320 320v64C300.8 896 128 723.2 128 512h64z" p-id="2710"></path></svg><p></p></div>'),StellarTimeline.requestAPI(e.api,function(e){$(o).find(".loading-wrap").remove();const r=o.getAttribute("user"),n=e.content||e;n.forEach((n,t)=>{if(!(n.user&&n.user.login&&r&&0<r.length)||r.includes(n.user.login)){var l='<div class="timenode" index="'+t+'">';l+='<div class="header">';let e=new Date(n.created_at);if(l+="<p>"+e.toString().replace(/\sGMT([^.]*)/i,"")+"</p>",l+="</div>",l+='<div class="body">',l+='<p class="title">',l+='<a href="'+n.html_url+'" target="_blank" rel="external nofollow noopener noreferrer">',l+=n.title||n.name||n.tag_name,l+="</a>",l+="</p>",l+=marked.parse(n.body),l+='<div class="footer">',l+='<div class="flex left">',n.labels?n.labels.forEach((e,n)=>{l+='<div class="item label '+e.name+'" style="background:#'+e.color+"18;border-color:#"+e.color+'36">',l+="<span>"+e.name+"</span>",l+="</div>"}):n.zipball_url&&(l+='<a class="item download" href="'+n.zipball_url+'" target="_blank" rel="external nofollow noopener noreferrer">',l+="<span>📦 "+n.tag_name+".zip</span>",l+="</a>"),l+="</div>",l+='<div class="flex right">',n.reactions&&0<n.reactions.total_count)for(var a of Object.keys(StellarTimeline.reactions))0<n.reactions[a]&&(l+='<div class="item reaction '+a+'">',l+="<span>"+StellarTimeline.reactions[a]+" "+n.reactions[a]+"</span>",l+="</div>");null!=n.comments&&(l+='<a class="item comments last" href="'+n.html_url+'#issuecomment-new" target="_blank" rel="external nofollow noopener noreferrer">',l+="<span>💬 "+(n.comments||0)+"</span>",l+="</a>"),l+="</div>",l+="</div>",l+="</div>",l+="</div>",$(o).append(l)}})},function(){$(o).find(".loading-wrap svg").remove(),$(o).find(".loading-wrap p").text("加载失败，请稍后重试。")})}};$(function(){for(var e=document.getElementsByClassName("stellar-timeline-api"),n=0;n<e.length;n++){const a=e[n];var t,l=a.getAttribute("api");null!=l&&((t=new Object).el=a,t.api=l,StellarTimeline.layoutDiv(t))}});