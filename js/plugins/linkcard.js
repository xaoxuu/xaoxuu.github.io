var cardLink={};function indexHandler(e){let r=e.replace(/(\/index\.html|\/)*$/gi,"");return 0===r.length&&(r+="/"),r}function isHttp(e){return/^(https?:)?\/\//g.test(e)}function renderer(e,r){e.querySelector(".title").innerHTML=r.title,r.icon&&0<r.icon.length&&(e.querySelector(".img").style='background-image: url("'+r.icon+'");'),r.desc&&0<r.desc.length&&(e.querySelector(".desc").innerHTML=r.desc)}function getInfo(n,c,i){try{let e,r,t;const a=(new DOMParser).parseFromString(c,"text/html");if(e=a.querySelector("title")){if(e=e.textContent,/^data:image/.test(r)&&(r=""),!r){const l=[].slice.call(a.querySelectorAll("link[rel][href]"));r=l.find(e=>e.rel.includes("icon")),r=r&&r.getAttribute("href")}t=a.querySelector('head meta[name="description"]'),t=t&&t.content,r&&!isHttp(r)&&(r=new URL(i).origin+r),cardLink.caches[i]={title:e,link:i,icon:r,desc:t},renderer(n,cardLink.caches[i])}}catch(e){console.warn("CardLink Error: Failed to parse",e)}}function fetchPage(t,n){fetch(t).then(e=>e.text()).then(n).catch(e=>{var r=cardLink.server;if(t.includes(r)||!r)return console.error("CardLink Error:",e);fetchPage(r+t,n)})}function setCardLink(e){(e="forEach"in(e||{})?e:document.querySelectorAll("a[cardlink]")).forEach(r=>{if(1===r.nodeType){r.removeAttribute("cardlink");const t=r.href;var e=cardLink.caches[t];if(e)return renderer(r,e);isHttp(t)&&fetchPage(t,e=>{getInfo(r,e,t)})}})}cardLink.caches={},cardLink.server="https://api.allorigins.win/raw?url=";