const StellarTimeline={reactions:{"+1":"👍","-1":"👎",laugh:"😀",hooray:"🎉",confused:"😕",heart:"❤️",rocket:"🚀",eyes:"👀"},requestAPI:(s,i,o)=>{let r=5;!function n(){return new Promise((a,e)=>{let t=0,l=setTimeout(()=>{0===t&&(t=2,l=null,e("请求超时"),0==r&&o())},5e3);fetch(s).then(function(e){if(2!==t&&(clearTimeout(l),a(e),l=null,t=1),e.ok)return e.json();throw new Error("Network response was not ok.")}).then(function(e){r=0,i(e)}).catch(function(e){0<r?(--r,setTimeout(()=>{n()},5e3)):o()})})}()},layoutDiv:e=>{const s=$(e.el)[0];$(s).append('<div class="loading-wrap"><svg class="loading" style="vertical-align: middle;fill: currentColor;overflow: hidden;" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2709"><path d="M832 512c0-176-144-320-320-320V128c211.2 0 384 172.8 384 384h-64zM192 512c0 176 144 320 320 320v64C300.8 896 128 723.2 128 512h64z" p-id="2710"></path></svg><p></p></div>'),StellarTimeline.requestAPI(e.api,function(e){$(s).find(".loading-wrap").remove();const a=e.content||e;a.forEach((a,t)=>{if(0<a.labels.length){var l='<div class="timenode" index="'+t+'">';l+='<div class="header">';let e=new Date(a.created_at);if(l+="<p>"+e.toString().replace(/\sGMT([^.]*)/i,"")+"</p>",l+="</div>",l+='<div class="body">',l+='<p class="title">'+a.title+"</p>",l+=marked.parse(a.body),l+='<div class="footer">',l+='<div class="flex labels">',a.labels.forEach((e,a)=>{l+='<div class="item label '+e.name+'" style="background:#'+e.color+"12;border-color:#"+e.color+'22">',l+="<span>"+e.name+"</span>",l+="</div>"}),l+="</div>",l+='<div class="flex reactions">',0<a.reactions.total_count)for(var n of Object.keys(StellarTimeline.reactions))0<a.reactions[n]&&(l+='<div class="item reaction '+n+'">',l+='<span class="key '+n+'">'+StellarTimeline.reactions[n]+"</span>",l+='<span class="value '+n+'">'+a.reactions[n]+"</span>",l+="</div>");l+='<a class="item comments" href="'+a.html_url+'">',l+='<span class="key comments">💬</span>',l+='<span class="value comments">'+a.comments+"</span>",l+="</a>",l+="</div>",l+="</div>",l+="</div>",l+="</div>",$(s).append(l)}})},function(){$(s).find(".loading-wrap svg").remove(),$(s).find(".loading-wrap p").text("加载失败，请稍后重试。")})}};$(function(){for(var e=document.getElementsByClassName("stellar-timeline-api"),a=0;a<e.length;a++){const n=e[a];var t,l=n.getAttribute("api");null!=l&&((t=new Object).el=n,t.api=l,StellarTimeline.layoutDiv(t))}});