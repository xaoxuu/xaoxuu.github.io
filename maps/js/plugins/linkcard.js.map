{"version":3,"sources":["js/plugins/linkcard.js"],"names":["renderer","el","obj","autofill","autofillStr","getAttribute","split","title","length","includes","querySelector","innerHTML","icon","style","setAttribute","desc","setCardLink","nodes","document","querySelectorAll","forEach","nodeType","removeAttribute","link","href","fetch","then","response","ok","json","Error","data","error","console","log"],"mappings":"AAAA,aAEA,SAASA,SAASC,EAAIC,GACpB,IAAIC,EAAW,GACTC,EAAcH,EAAGI,aAAa,YAChCD,IACFD,EAAWC,EAAYE,MAAM,MAE3BJ,EAAIK,OAASL,EAAIK,MAAMC,OAAS,GAAKL,EAASM,SAAS,WACzDR,EAAGS,cAAc,UAAUC,UAAYT,EAAIK,MAC3CN,EAAGM,MAAQL,EAAIK,OAEbL,EAAIU,MAAQV,EAAIU,KAAKJ,OAAS,GAAKL,EAASM,SAAS,UACvDR,EAAGS,cAAc,QAAQG,MAAQ,0BAA4BX,EAAIU,KAAO,MACxEX,EAAGS,cAAc,QAAQI,aAAa,UAAWZ,EAAIU,OAEvD,IAAIG,EAAOd,EAAGS,cAAc,SACxBK,GAAQb,EAAIa,MAAQb,EAAIa,KAAKP,OAAS,GAAKL,EAASM,SAAS,UAC/DM,EAAKJ,UAAYT,EAAIa,KAEzB,CAOA,SAASC,YAAYC,IAEnBA,EAAQ,YAAcA,GAAS,CAAC,GAAKA,EAAQC,SAASC,iBAAiB,gBACjEC,SAAQ,SAACnB,GAEb,GAAoB,IAAhBA,EAAGoB,SAAP,CACApB,EAAGqB,gBAAgB,YACnB,IAAMC,EAAOtB,EAAGuB,KAEhBC,MADY,wCACAF,GAAMG,MAAK,SAASC,GAC9B,GAAIA,EAASC,GACX,OAAOD,EAASE,OAElB,MAAM,IAAIC,MAAM,+BAClB,IAAGJ,MAAK,SAASK,GACf/B,SAASC,EAAI8B,EACf,IAAE,UAAO,SAASC,GAChBC,QAAQC,IAAIF,EACd,GAbuB,CAczB,GACF","file":"../../../js/plugins/linkcard.js","sourcesContent":["// 本插件由CardLink定制而成，原项目源码: https://github.com/Lete114/CardLink\n\nfunction renderer(el, obj) {\n  var autofill = [];\n  const autofillStr = el.getAttribute('autofill');\n  if (autofillStr) {\n    autofill = autofillStr.split(',');\n  }\n  if (obj.title && obj.title.length > 0 && autofill.includes('title')) {\n    el.querySelector('.title').innerHTML = obj.title;\n    el.title = obj.title;\n  }\n  if (obj.icon && obj.icon.length > 0 && autofill.includes('icon')) {\n    el.querySelector('.img').style = 'background-image: url(\"' + obj.icon + '\");';\n    el.querySelector('.img').setAttribute('data-bg', obj.icon);\n  }\n  let desc = el.querySelector('.desc');\n  if (desc && obj.desc && obj.desc.length > 0 && autofill.includes('desc')) {\n    desc.innerHTML = obj.desc;\n  }\n}\n\n/**\n * Create card links\n * @param {NodeList} nodes A collection of nodes or a collection of arrays,\n * if it is an array then the array must always contain node element\n */\nfunction setCardLink(nodes) {\n  // If the `nodes` do not contain a `forEach` method, then the default `a[cardlink]` is used\n  nodes = 'forEach' in (nodes || {}) ? nodes : document.querySelectorAll('a[cardlink]')\n  nodes.forEach((el) => {\n    // If it is not a tag element then it is not processed\n    if (el.nodeType !== 1) return\n    el.removeAttribute('cardlink');\n    const link = el.href;\n    const api = 'https://api.vlts.cc/site_info/v1?url=';\n    fetch(api + link).then(function(response) {\n      if (response.ok) {\n        return response.json();\n      }\n      throw new Error('Network response was not ok.');\n    }).then(function(data) {\n      renderer(el, data);\n    }).catch(function(error) {\n      console.log(error);\n    });\n  })\n}\n"]}