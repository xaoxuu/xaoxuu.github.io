var cardLink={};function indexHandler(e){let t=e.replace(/(\/index\.html|\/)*$/gi,"");return 0===t.length&&(t+="/"),t}function isHttp(e){return/^(https?:)?\/\//g.test(e)}function renderer(e,t){t.title&&0<t.title.length&&(e.querySelector(".title").innerHTML=t.title),t.icon&&0<t.icon.length&&(e.querySelector(".img").style='background-image: url("'+t.icon+'");'),t.desc&&0<t.desc.length&&(e.querySelector(".desc").innerHTML=t.desc)}function getInfo(n,c,i){try{let e,t,r;const a=(new DOMParser).parseFromString(c,"text/html");if(e=a.querySelector("title")){if(e=e.textContent,/^data:image/.test(t)&&(t=""),!t){const l=[].slice.call(a.querySelectorAll("link[rel][href]"));t=l.find(e=>e.rel.includes("icon")),t=t&&t.getAttribute("href")}r=a.querySelector('head meta[name="description"]'),r=r&&r.content,t&&!isHttp(t)&&(t=new URL(i).origin+t),cardLink.caches[i]={title:e,link:i,icon:t,desc:r},renderer(n,cardLink.caches[i])}}catch(e){console.warn("CardLink Error: Failed to parse",e)}}function fetchPage(r,n){fetch(r).then(e=>e.text()).then(n).catch(e=>{var t=cardLink.server;if(r.includes(t)||!t)return console.error("CardLink Error:",e);fetchPage(t+r,n)})}function setCardLink(e){(e="forEach"in(e||{})?e:document.querySelectorAll("a[cardlink]")).forEach(t=>{if(1===t.nodeType){t.removeAttribute("cardlink");const r=t.href;var e=cardLink.caches[r];if(e)return renderer(t,e);isHttp(r)&&fetchPage(r,e=>{getInfo(t,e,r)})}})}cardLink.caches={},cardLink.server="https://api.allorigins.win/raw?url=";